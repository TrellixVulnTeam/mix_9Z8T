+ build
+ echo build /home/pg/mix/store/d42a05e4d7567e1f0e92c43ded78fa72-lib-mimalloc
build /home/pg/mix/store/d42a05e4d7567e1f0e92c43ded78fa72-lib-mimalloc
+ do_unpack
+ mkdir bld
+ cd bld
+ /home/pg/.venv/bin/python3 /home/pg/sources/mix/mix misc untar /home/pg/mix/store/6470c737bf1e9905f17453201b9b54ec/v2.0.2.tar.gz
untar /home/pg/mix/store/6470c737bf1e9905f17453201b9b54ec/v2.0.2.tar.gz
+ cd mimalloc-2.0.2
+ do_configure
+ echo configure stage
configure stage
+ setup_compiler
+ which dash
+ which clang
+ cat
+ which dash
+ which clang++
+ cat
+ chmod +x clang clang++
+ ln -s clang gcc
+ ln -s clang++ g++
+ pwd
+ export PATH=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2:/nowhere:/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/bin:/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort/bin:/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake/bin:/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env/bin:/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/bin:/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang/bin:/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld/bin:/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler/bin:/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system/bin:/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release/bin:/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf/bin:/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux/bin:/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake/bin:/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake/bin:/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai/bin:/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env/bin:/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/bin:/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which/bin:/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed/bin:/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk/bin:/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep/bin:/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils/bin:/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash/bin:/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils/bin:/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils/bin:/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/bin
+ which clang
+ export CC=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/clang
+ which clang++
+ export CXX=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/clang++
+ build_cmake_prepare -G Ninja -DMI_OVERRIDE=ON -DMI_BUILD_STATIC=ON -DMI_BUILD_SHARED=OFF -DMI_BUILD_TESTS=OFF ..
+ export CPPFLAGS=-Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include 
+ export CXXFLAGS=-Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -Wno-stdlibcxx-not-found -O2 
+ export CFLAGS=-Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 
+ echo /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2:/nowhere:/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/bin:/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort/bin:/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake/bin:/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env/bin:/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/bin:/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang/bin:/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld/bin:/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler/bin:/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system/bin:/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release/bin:/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf/bin:/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux/bin:/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake/bin:/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake/bin:/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai/bin:/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env/bin:/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/bin:/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which/bin:/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed/bin:/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk/bin:/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep/bin:/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils/bin:/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash/bin:/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils/bin:/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils/bin:/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/bin
+ tr : ;
+ sed -e s|/bin;|;|g
+ export CMPATH=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2;/nowhere;/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl;/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort;/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake;/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env;/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang;/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang;/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld;/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler;/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system;/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release;/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf;/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux;/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake;/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake;/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai;/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env;/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang;/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which;/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed;/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk;/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep;/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils;/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash;/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils;/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils;/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/bin
+ rm -rf build
+ mkdir build
+ cd build
+ build_cmake_ps
+ echo 
+ chmod +x ps
+ pwd
+ export PATH=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/build:/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2:/nowhere:/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/bin:/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort/bin:/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake/bin:/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env/bin:/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/bin:/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang/bin:/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld/bin:/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler/bin:/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system/bin:/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release/bin:/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf/bin:/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux/bin:/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake/bin:/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake/bin:/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai/bin:/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env/bin:/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/bin:/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which/bin:/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed/bin:/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk/bin:/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep/bin:/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils/bin:/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash/bin:/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils/bin:/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils/bin:/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/bin
+ cmake -Wno-dev -DCMAKE_INSTALL_PREFIX=/home/pg/mix/store/d42a05e4d7567e1f0e92c43ded78fa72-lib-mimalloc -DCMAKE_EXE_LINKER_FLAGS=-static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld   -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_FLAGS_RELEASE=-Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld   -DCMAKE_CXX_FLAGS_RELEASE=-Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -Wno-stdlibcxx-not-found -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld   -DBUILD_SHARED_LIBS=OFF -DCMAKE_PREFIX_PATH=/home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2;/nowhere;/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl;/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort;/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake;/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env;/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang;/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang;/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld;/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler;/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system;/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release;/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf;/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux;/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake;/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake;/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai;/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env;/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang;/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which;/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed;/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk;/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep;/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils;/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash;/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils;/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils;/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/bin -G Ninja -DMI_OVERRIDE=ON -DMI_BUILD_STATIC=ON -DMI_BUILD_SHARED=OFF -DMI_BUILD_TESTS=OFF ..
-- The C compiler identification is Clang 13.0.0
-- The CXX compiler identification is Clang 13.0.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/g++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Override standard malloc (MI_OVERRIDE=ON)
-- 
-- Library base name: mimalloc
-- Build type       : release
-- Compiler         : /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc
-- Version          : 2.0
-- Build targets    : static;object
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/build
+ do_build
+ echo build stage
build stage
+ cd build
+ ninja -j 80 all
[1/16] Building C object CMakeFiles/mimalloc-static.dir/src/init.c.o
[2/16] Building C object CMakeFiles/mimalloc-static.dir/src/options.c.o
[3/16] Building C object CMakeFiles/mimalloc-static.dir/src/heap.c.o
[4/16] Building C object CMakeFiles/mimalloc-static.dir/src/alloc-posix.c.o
[5/16] Building C object CMakeFiles/mimalloc-static.dir/src/alloc-aligned.c.o
[6/16] Building C object CMakeFiles/mimalloc-static.dir/src/alloc.c.o
[7/16] Building C object CMakeFiles/mimalloc-static.dir/src/page.c.o
[8/16] Building C object CMakeFiles/mimalloc-static.dir/src/segment.c.o
[9/16] Building C object CMakeFiles/mimalloc-static.dir/src/segment-cache.c.o
[10/16] Building C object CMakeFiles/mimalloc-static.dir/src/arena.c.o
[11/16] Building C object CMakeFiles/mimalloc-static.dir/src/bitmap.c.o
[12/16] Building C object CMakeFiles/mimalloc-static.dir/src/os.c.o
[13/16] Building C object CMakeFiles/mimalloc-static.dir/src/random.c.o
[14/16] Building C object CMakeFiles/mimalloc-static.dir/src/stats.c.o
[15/16] Building C object CMakeFiles/mimalloc-obj.dir/src/static.c.o
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/alloc-aligned.c.o -MF CMakeFiles/mimalloc-static.dir/src/alloc-aligned.c.o.d -o CMakeFiles/mimalloc-static.dir/src/alloc-aligned.c.o -c ../src/alloc-aligned.c
In file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-aligned.c:9:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m10 warnings and 11 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/alloc-posix.c.o -MF CMakeFiles/mimalloc-static.dir/src/alloc-posix.c.o.d -o CMakeFiles/mimalloc-static.dir/src/alloc-posix.c.o -c ../src/alloc-posix.c
In file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc-posix.c:13:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m10 warnings and 11 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/heap.c.o -MF CMakeFiles/mimalloc-static.dir/src/heap.c.o.d -o CMakeFiles/mimalloc-static.dir/src/heap.c.o -c ../src/heap.c
In file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/heap.c:9:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m10 warnings and 11 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/init.c.o -MF CMakeFiles/mimalloc-static.dir/src/init.c.o.d -o CMakeFiles/mimalloc-static.dir/src/init.c.o -c ../src/init.c
In file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/init.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/init.c:28:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'ATOMIC_VAR_INIT' is invalid in C99 [-Wimplicit-function-declaration][0m
  ATOMIC_VAR_INIT(0), // xthread_free
[0;1;32m  ^
[0m[1m../src/init.c:28:3: [0m[0;1;31merror: [0m[1minitializer element is not a compile-time constant[0m
  ATOMIC_VAR_INIT(0), // xthread_free
[0;1;32m  ^~~~~~~~~~~~~~~~~~
[0m[1m../src/init.c:109:3: [0m[0;1;35mwarning: [0m[1mincompatible integer to pointer conversion initializing '_Atomic(mi_block_t *)' with an expression of type 'int' [-Wint-conversion][0m
  ATOMIC_VAR_INIT(NULL),
[0;1;32m  ^~~~~~~~~~~~~~~~~~~~~
[0m[1m../src/init.c:109:3: [0m[0;1;31merror: [0m[1minitializer element is not a compile-time constant[0m
  ATOMIC_VAR_INIT(NULL),
[0;1;32m  ^~~~~~~~~~~~~~~~~~~~~
[0m[1m../src/init.c:149:3: [0m[0;1;35mwarning: [0m[1mincompatible integer to pointer conversion initializing '_Atomic(mi_block_t *)' with an expression of type 'int' [-Wint-conversion][0m
  ATOMIC_VAR_INIT(NULL),
[0;1;32m  ^~~~~~~~~~~~~~~~~~~~~
[0m[1m../src/init.c:149:3: [0m[0;1;31merror: [0m[1minitializer element is not a compile-time constant[0m
  ATOMIC_VAR_INIT(NULL),
[0;1;32m  ^~~~~~~~~~~~~~~~~~~~~
[0m13 warnings and 14 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/stats.c.o -MF CMakeFiles/mimalloc-static.dir/src/stats.c.o.d -o CMakeFiles/mimalloc-static.dir/src/stats.c.o -c ../src/stats.c
In file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/stats.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/stats.c:510:30: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  *peak_commit    = (size_t)(mi_atomic_loadi64_relaxed((_Atomic(int64_t)*)&_mi_stats_main.committed.peak));
[0;1;32m                             ^
[0m[1m../include/mimalloc-atomic.h:111:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/stats.c:510:30: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:111:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/stats.c:511:30: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  *current_commit = (size_t)(mi_atomic_loadi64_relaxed((_Atomic(int64_t)*)&_mi_stats_main.committed.current));
[0;1;32m                             ^
[0m[1m../include/mimalloc-atomic.h:111:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m11 warnings and 13 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/random.c.o -MF CMakeFiles/mimalloc-static.dir/src/random.c.o.d -o CMakeFiles/mimalloc-static.dir/src/random.c.o -c ../src/random.c
In file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/random.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/random.c:214:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_load_acquire(&no_getrandom)==0) {
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/random.c:214:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/random.c:218:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_store_release(&no_getrandom, 1UL); // don't call again, and fall back to /dev/urandom
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/random.c:218:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m12 warnings and 13 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/segment-cache.c.o -MF CMakeFiles/mimalloc-static.dir/src/segment-cache.c.o.d -o CMakeFiles/mimalloc-static.dir/src/segment-cache.c.o -c ../src/segment-cache.c
In file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment-cache.c:14:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment-cache.c:37:83: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'ATOMIC_VAR_INIT' is invalid in C99 [-Wimplicit-function-declaration][0m
static mi_decl_cache_align mi_bitmap_field_t cache_available[MI_CACHE_FIELDS] = { MI_CACHE_BITS_SET };        // zero bit = available!
[0;1;32m                                                                                  ^
[0m[1m../src/segment-cache.c:25:39: [0m[0;1;30mnote: [0mexpanded from macro 'MI_CACHE_BITS_SET'[0m
#define MI_CACHE_BITS_SET   MI_INIT16(BITS_SET)
[0;1;32m                                      ^
[0m[1m../src/segment-cache.c:37:83: [0m[0;1;31merror: [0m[1minitializer element is not a compile-time constant[0m
static mi_decl_cache_align mi_bitmap_field_t cache_available[MI_CACHE_FIELDS] = { MI_CACHE_BITS_SET };        // zero bit = available!
[0;1;32m                                                                                  ^~~~~~~~~~~~~~~~~
[0m[1m../src/segment-cache.c:25:39: [0m[0;1;30mnote: [0mexpanded from macro 'MI_CACHE_BITS_SET'[0m
#define MI_CACHE_BITS_SET   MI_INIT16(BITS_SET)
[0;1;32m                            ~~~~~~~~~~^~~~~~~~~
[0m[1m../include/mimalloc-internal.h:195:32: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT16'[0m
#define MI_INIT16(x)  MI_INIT8(x),MI_INIT8(x)
[0;1;32m                      ~~~~~~~~~^~
[0m[1m../include/mimalloc-internal.h:194:32: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT8'[0m
#define MI_INIT8(x)   MI_INIT4(x),MI_INIT4(x)
[0;1;32m                      ~~~~~~~~~^~
[0m[1m../include/mimalloc-internal.h:193:23: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT4'[0m
#define MI_INIT4(x)   x(),x(),x(),x()
[0;1;32m                      ^~~
[0m[1m../src/segment-cache.c:24:29: [0m[0;1;30mnote: [0mexpanded from macro 'BITS_SET'[0m
#define BITS_SET()          ATOMIC_VAR_INIT(UINTPTR_MAX)
[0;1;32m                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
[0m[1m../src/segment-cache.c:38:89: [0m[0;1;31merror: [0m[1minitializer element is not a compile-time constant[0m
static mi_decl_cache_align mi_bitmap_field_t cache_available_large[MI_CACHE_FIELDS] = { MI_CACHE_BITS_SET };
[0;1;32m                                                                                        ^~~~~~~~~~~~~~~~~
[0m[1m../src/segment-cache.c:25:39: [0m[0;1;30mnote: [0mexpanded from macro 'MI_CACHE_BITS_SET'[0m
#define MI_CACHE_BITS_SET   MI_INIT16(BITS_SET)
[0;1;32m                            ~~~~~~~~~~^~~~~~~~~
[0m[1m../include/mimalloc-internal.h:195:32: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT16'[0m
#define MI_INIT16(x)  MI_INIT8(x),MI_INIT8(x)
[0;1;32m                      ~~~~~~~~~^~
[0m[1m../include/mimalloc-internal.h:194:32: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT8'[0m
#define MI_INIT8(x)   MI_INIT4(x),MI_INIT4(x)
[0;1;32m                      ~~~~~~~~~^~
[0m[1m../include/mimalloc-internal.h:193:23: [0m[0;1;30mnote: [0mexpanded from macro 'MI_INIT4'[0m
#define MI_INIT4(x)   x(),x(),x(),x()
[0;1;32m                      ^~~
[0m[1m../src/segment-cache.c:24:29: [0m[0;1;30mnote: [0mexpanded from macro 'BITS_SET'[0m
#define BITS_SET()          ATOMIC_VAR_INIT(UINTPTR_MAX)
[0;1;32m                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
[0m[1m../src/segment-cache.c:81:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_storei64_release(&slot->expire,(mi_msecs_t)0);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:112:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_release'[0m
#define mi_atomic_storei64_release(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/segment-cache.c:81:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:112:71: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_release'[0m
#define mi_atomic_storei64_release(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                      ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/segment-cache.c:127:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_msecs_t expire = mi_atomic_loadi64_relaxed(&slot->expire);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:111:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/segment-cache.c:127:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:111:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment-cache.c:134:18: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
        expire = mi_atomic_loadi64_acquire(&slot->expire);
[0;1;32m                 ^
[0m[1m../include/mimalloc-atomic.h:110:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_acquire'[0m
#define mi_atomic_loadi64_acquire(p)    mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/segment-cache.c:137:11: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
          mi_atomic_storei64_relaxed(&slot->expire,(mi_msecs_t)0);
[0;1;32m          ^
[0m[1m../include/mimalloc-atomic.h:113:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_relaxed'[0m
#define mi_atomic_storei64_relaxed(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/segment-cache.c:137:11: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:113:71: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_relaxed'[0m
#define mi_atomic_storei64_relaxed(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                                      ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment-cache.c:189:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_storei64_relaxed(&slot->expire,(mi_msecs_t)0);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:113:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_relaxed'[0m
#define mi_atomic_storei64_relaxed(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/segment-cache.c:189:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:113:71: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_relaxed'[0m
#define mi_atomic_storei64_relaxed(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                                      ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment-cache.c:198:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
      mi_atomic_storei64_release(&slot->expire, _mi_clock_now() + delay);
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:112:71: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_storei64_release'[0m
#define mi_atomic_storei64_release(p,x) mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                      ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/segment-cache.c:248:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t mask = mi_atomic_load_relaxed(&mi_segment_map[index]);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
16 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/arena.c.o -MF CMakeFiles/mimalloc-static.dir/src/arena.c.o.d -o CMakeFiles/mimalloc-static.dir/src/arena.c.o -c ../src/arena.c
In file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/arena.c:24:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:108:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_store_relaxed(&arena->search_idx, mi_bitmap_index_field(*bitmap_idx));  // start search from found location next time around
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:49:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_relaxed'[0m
#define mi_atomic_store_relaxed(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/arena.c:108:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:49:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_relaxed'[0m
#define mi_atomic_store_relaxed(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:156:28: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t max_arena = mi_atomic_load_relaxed(&mi_arena_count);  
[0;1;32m                           ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/arena.c:156:28: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:163:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
    mi_arena_t* arena = mi_atomic_load_ptr_relaxed(mi_arena_t, &mi_arenas[i]);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:178:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
    mi_arena_t* arena = mi_atomic_load_ptr_relaxed(mi_arena_t, &mi_arenas[i]);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:249:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_arena_t* arena = mi_atomic_load_ptr_relaxed(mi_arena_t,&mi_arenas[arena_idx]);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/arena.c:249:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/arena.c:289:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t i = mi_atomic_increment_acq_rel(&mi_arena_count);
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/arena.c:289:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/arena.c:291:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_sub_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_decrement_acq_rel(&mi_arena_count);
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:67:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_decrement_acq_rel'[0m
#define mi_atomic_decrement_acq_rel(p)           mi_atomic_sub_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:60:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_sub_acq_rel'[0m
#define mi_atomic_sub_acq_rel(p,x)               mi_atomic(fetch_sub_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_sub_explicit
[0;1;32m^
[0m[1m../src/arena.c:291:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:67:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_decrement_acq_rel'[0m
#define mi_atomic_decrement_acq_rel(p)           mi_atomic_sub_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:60:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_sub_acq_rel'[0m
#define mi_atomic_sub_acq_rel(p,x)               mi_atomic(fetch_sub_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:39:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/arena.c:294:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_ptr_release(mi_arena_t,&mi_arenas[i], arena);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:40:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/arena.c:294:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:41:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/arena.c:356:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    uintptr_t field = mi_atomic_load_relaxed(&fields[i]);
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:42:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
17 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/bitmap.c.o -MF CMakeFiles/mimalloc-static.dir/src/bitmap.c.o.d -o CMakeFiles/mimalloc-static.dir/src/bitmap.c.o -c ../src/bitmap.c
In file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/bitmap.c:21:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/bitmap.c:49:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t map  = mi_atomic_load_relaxed(field);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:49:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/bitmap.c:70:12: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
      if (!mi_atomic_cas_weak_acq_rel(field, &map, newmap)) {  // TODO: use strong cas here?
[0;1;32m           ^
[0m[1m../include/mimalloc-atomic.h:53:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:30:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:70:12: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:53:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/bitmap.c:70:12: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:53:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/bitmap.c:126:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_and_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t prev = mi_atomic_and_acq_rel(&bitmap[idx], ~mask);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:61:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_and_acq_rel'[0m
#define mi_atomic_and_acq_rel(p,x)               mi_atomic(fetch_and_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_and_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:126:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:61:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_and_acq_rel'[0m
#define mi_atomic_and_acq_rel(p,x)               mi_atomic(fetch_and_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/bitmap.c:139:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_or_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t prev = mi_atomic_or_acq_rel(&bitmap[idx], mask);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:62:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_or_acq_rel'[0m
#define mi_atomic_or_acq_rel(p,x)                mi_atomic(fetch_or_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_or_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:139:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:62:83: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_or_acq_rel'[0m
#define mi_atomic_or_acq_rel(p,x)                mi_atomic(fetch_or_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/bitmap.c:150:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t field = mi_atomic_load_relaxed(&bitmap[idx]);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:150:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/bitmap.c:179:19: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t map = mi_atomic_load_relaxed(field);  
[0;1;32m                  ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/bitmap.c:179:19: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/bitmap.c:191:11: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
    map = mi_atomic_load_relaxed(field);
[0;1;32m          ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:40:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
16 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/os.c.o -MF CMakeFiles/mimalloc-static.dir/src/os.c.o.d -o CMakeFiles/mimalloc-static.dir/src/os.c.o -c ../src/os.c
In file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/os.c:20:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/os.c:382:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    uintptr_t try_ok = mi_atomic_load_acquire(&large_page_try_ok);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/os.c:382:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/os.c:388:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_strong_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
      mi_atomic_cas_strong_acq_rel(&large_page_try_ok, &try_ok, try_ok - 1);
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:55:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:44:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong'[0m
  mi_atomic(compare_exchange_strong_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:30:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_strong_explicit
[0;1;32m^
[0m[1m../src/os.c:388:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:55:81: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/os.c:388:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:55:106: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                                         ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/os.c:428:11: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
          mi_atomic_store_release(&large_page_try_ok, (uintptr_t)10);  // on error, don't try again for the next N allocations
[0;1;32m          ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/os.c:428:11: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/os.c:492:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t hint = mi_atomic_add_acq_rel(&aligned_base, size);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/os.c:492:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/os.c:500:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_strong_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_cas_strong_acq_rel(&aligned_base, &expected, init);
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:55:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:44:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong'[0m
  mi_atomic(compare_exchange_strong_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_strong_explicit
[0;1;32m^
[0m[1m../src/os.c:500:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:55:81: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/os.c:500:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:55:106: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                                         ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/os.c:501:12: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
    hint = mi_atomic_add_acq_rel(&aligned_base, size); // this may still give 0 or > KK_HINT_MAX but that is ok, it is a hint after all
[0;1;32m           ^
[0m[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:39:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/os.c:828:38: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'ATOMIC_VAR_INIT' is invalid in C99 [-Wimplicit-function-declaration][0m
  static _Atomic(uintptr_t) advice = ATOMIC_VAR_INIT(KK_MADV_FREE_INITIAL);
[0;1;32m                                     ^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
16 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/alloc.c.o -MF CMakeFiles/mimalloc-static.dir/src/alloc.c.o.d -o CMakeFiles/mimalloc-static.dir/src/alloc.c.o -c ../src/alloc.c
In file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/alloc.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/alloc.c:362:28: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_thread_free_t tfree = mi_atomic_load_relaxed(&page->xthread_free);
[0;1;32m                           ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:42:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/alloc.c:362:28: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:43:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/alloc.c:374:13: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  } while (!mi_atomic_cas_weak_release(&page->xthread_free, &tfree, tfreex));
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:46:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[1m../src/alloc.c:374:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:44:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/alloc.c:374:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:45:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/alloc.c:378:42: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
    mi_heap_t* const heap = (mi_heap_t*)(mi_atomic_load_acquire(&page->xheap)); //mi_page_heap(page);
[0;1;32m                                         ^
[0m[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:48:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/alloc.c:382:27: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
      mi_block_t* dfree = mi_atomic_load_ptr_relaxed(mi_block_t, &heap->thread_delayed_free);
[0;1;32m                          ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:50:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/alloc.c:385:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
      } while (!mi_atomic_cas_ptr_weak_release(mi_block_t,&heap->thread_delayed_free, &dfree, block));
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:93:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_release'[0m
#define mi_atomic_cas_ptr_weak_release(tp,p,exp,des)    mi_atomic_cas_weak_release(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:51:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/alloc.c:385:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:93:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_release'[0m
#define mi_atomic_cas_ptr_weak_release(tp,p,exp,des)    mi_atomic_cas_weak_release(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:52:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/alloc.c:389:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
    tfree = mi_atomic_load_relaxed(&page->xthread_free);
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:55:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
12 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/options.c.o -MF CMakeFiles/mimalloc-static.dir/src/options.c.o.d -o CMakeFiles/mimalloc-static.dir/src/options.c.o -c ../src/options.c
In file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/options.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/options.c:190:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_load_relaxed(&out_len)>=MI_MAX_DELAY_OUTPUT) return;
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:70:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/options.c:190:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:71:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/options.c:194:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t start = mi_atomic_add_acq_rel(&out_len, n);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:72:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/options.c:194:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:73:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/options.c:206:18: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  size_t count = mi_atomic_add_acq_rel(&out_len, (no_more_buf ? MI_MAX_DELAY_OUTPUT : 1));
[0;1;32m                 ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:74:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/options.c:206:18: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:75:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/options.c:236:31: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (parg != NULL) { *parg = mi_atomic_load_ptr_acquire(void,&mi_out_arg); }
[0;1;32m                              ^
[0m[1m../include/mimalloc-atomic.h:78:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_acquire'[0m
#define mi_atomic_load_ptr_acquire(tp,p)                mi_atomic_load_acquire(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:76:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/options.c:236:31: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:78:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_acquire'[0m
#define mi_atomic_load_ptr_acquire(tp,p)                mi_atomic_load_acquire(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:77:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/options.c:243:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_ptr_release(void,&mi_out_arg, arg);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:78:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/options.c:243:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:79:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/options.c:330:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_increment_acq_rel(&error_count) > mi_max_error_count) return;
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:80:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/options.c:330:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:81:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/options.c:336:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_increment_acq_rel(&warning_count) > mi_max_warning_count) return;
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:82:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/options.c:336:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:66:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_acq_rel'[0m
#define mi_atomic_increment_acq_rel(p)           mi_atomic_add_acq_rel(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:83:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/options.c:382:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_ptr_release(void,&mi_error_arg, arg);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:84:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/options.c:382:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:85:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/options.c:393:27: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_error_handler(err, mi_atomic_load_ptr_acquire(void,&mi_error_arg));
[0;1;32m                          ^
[0m[1m../include/mimalloc-atomic.h:78:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_acquire'[0m
#define mi_atomic_load_ptr_acquire(tp,p)                mi_atomic_load_acquire(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:86:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
19 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/segment.c.o -MF CMakeFiles/mimalloc-static.dir/src/segment.c.o.d -o CMakeFiles/mimalloc-static.dir/src/segment.c.o -c ../src/segment.c
In file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/segment.c:8:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment.c:685:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_ptr_release(mi_segment_t, &segment->abandoned_next, NULL);  // tsan
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/segment.c:685:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/segment.c:912:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_segment_t* anext = mi_atomic_load_ptr_relaxed(mi_segment_t, &abandoned_visited);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/segment.c:912:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment.c:914:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_store_ptr_release(mi_segment_t, &segment->abandoned_next, anext);
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:30:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0m[1m../src/segment.c:914:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:91:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_ptr_release'[0m
#define mi_atomic_store_ptr_release(tp,p,x)             mi_atomic_store_release(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/segment.c:915:13: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  } while (!mi_atomic_cas_ptr_weak_release(mi_segment_t, &abandoned_visited, &anext, segment));
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:93:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_release'[0m
#define mi_atomic_cas_ptr_weak_release(tp,p,exp,des)    mi_atomic_cas_weak_release(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[1m../src/segment.c:915:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:93:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_release'[0m
#define mi_atomic_cas_ptr_weak_release(tp,p,exp,des)    mi_atomic_cas_weak_release(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/segment.c:915:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:93:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_release'[0m
#define mi_atomic_cas_ptr_weak_release(tp,p,exp,des)    mi_atomic_cas_weak_release(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment.c:916:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_increment_relaxed(&abandoned_visited_count);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:64:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_relaxed'[0m
#define mi_atomic_increment_relaxed(p)           mi_atomic_add_relaxed(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:57:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_relaxed'[0m
#define mi_atomic_add_relaxed(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[1m../src/segment.c:916:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:64:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_increment_relaxed'[0m
#define mi_atomic_increment_relaxed(p)           mi_atomic_add_relaxed(p,(uintptr_t)1)
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:57:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_relaxed'[0m
#define mi_atomic_add_relaxed(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(relaxed))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment.c:923:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_load_ptr_relaxed(mi_segment_t, &abandoned_visited) == NULL) return false;
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/segment.c:923:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/segment.c:926:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_exchange_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_segment_t* first = mi_atomic_exchange_ptr_acq_rel(mi_segment_t, &abandoned_visited, NULL);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:97:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_exchange_ptr_acq_rel'[0m
#define mi_atomic_exchange_ptr_acq_rel(tp,p,x)          mi_atomic_exchange_acq_rel(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:51:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_exchange_acq_rel'[0m
#define mi_atomic_exchange_acq_rel(p,x)          mi_atomic(exchange_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:39:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_exchange_explicit
[0;1;32m^
[0m[1m../src/segment.c:926:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:97:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_exchange_ptr_acq_rel'[0m
#define mi_atomic_exchange_ptr_acq_rel(tp,p,x)          mi_atomic_exchange_acq_rel(p,x)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:51:83: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_exchange_acq_rel'[0m
#define mi_atomic_exchange_acq_rel(p,x)          mi_atomic(exchange_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:40:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
17 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -DMI_STATIC_LIB -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-static.dir/src/page.c.o -MF CMakeFiles/mimalloc-static.dir/src/page.c.o.d -o CMakeFiles/mimalloc-static.dir/src/page.c.o -c ../src/page.c
In file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:15:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/page.c:23:
[1m../src/page-queue.c:303:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_store_release(&page->xheap, (uintptr_t)heap); 
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/page.c:23:
[1m../src/page-queue.c:303:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/page.c:130:13: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    tfree = mi_atomic_load_acquire(&page->xthread_free); // note: must acquire as we can break/repeat this loop and not do a CAS;
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:28:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/page.c:130:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/page.c:144:13: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
           !mi_atomic_cas_weak_release(&page->xthread_free, &tfree, tfreex));
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[1m../src/page.c:144:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:30:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0m[1m../src/page.c:144:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/page.c:159:28: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_thread_free_t tfree = mi_atomic_load_relaxed(&page->xthread_free);
[0;1;32m                           ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/page.c:159:28: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/page.c:163:13: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  } while (!mi_atomic_cas_weak_acq_rel(&page->xthread_free, &tfree, tfreex));
[0;1;32m            ^
[0m[1m../include/mimalloc-atomic.h:53:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[1m../src/page.c:163:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:53:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0m[1m../src/page.c:163:13: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:53:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0m[1m../src/page.c:276:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_block_t* block = mi_atomic_load_ptr_relaxed(mi_block_t, &heap->thread_delayed_free);
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0m[1m../src/page.c:276:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:79:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_ptr_relaxed'[0m
#define mi_atomic_load_ptr_relaxed(tp,p)                mi_atomic_load_relaxed(p)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:39:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0m[1m../src/page.c:277:28: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (block != NULL && !mi_atomic_cas_ptr_weak_acq_rel(mi_block_t, &heap->thread_delayed_free, &block, NULL)) { /* nothing */ };
[0;1;32m                           ^
[0m[1m../include/mimalloc-atomic.h:94:57: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_ptr_weak_acq_rel'[0m
#define mi_atomic_cas_ptr_weak_acq_rel(tp,p,exp,des)    mi_atomic_cas_weak_acq_rel(p,exp,des)
[0;1;32m                                                        ^
[0m[1m../include/mimalloc-atomic.h:53:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_acq_rel'[0m
#define mi_atomic_cas_weak_acq_rel(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:42:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
17 warnings and 20 errors generated.
ninja: job failed: /home/pg/mix/build/d42a05e4d7567e1f0e92c43ded78fa72/bld/mimalloc-2.0.2/gcc -DMI_MALLOC_OVERRIDE -I../include -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2 -Wno-unused-command-line-argument -nostdinc -isystem /home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/include -isystem /home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/lib/clang/13.0.0/include -nostdinc --target=x86_64-linus-linux -DNDEBUG -isystem /home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/lib/clang/13.0.0/include  -fcolor-diagnostics -O2  -static -nostdlib -nostdlib++ -L/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/lib -lcrt -lc -nostdlib++ -fcolor-diagnostics --target=x86_64-linus-linux -fuse-ld=lld -fPIC -Wall -Wextra -Wno-unknown-pragmas -fvisibility=hidden -Wpedantic -Wno-static-in-inline -ftls-model=initial-exec -std=gnu11 -MD -MT CMakeFiles/mimalloc-obj.dir/src/static.c.o -MF CMakeFiles/mimalloc-obj.dir/src/static.c.o.d -o CMakeFiles/mimalloc-obj.dir/src/static.c.o -c ../src/static.c
In file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:10: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m         ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:3:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:102:67: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  return mi_atomic(fetch_add_explicit)((_Atomic(int64_t)*)p, add, mi_memory_order(relaxed));
[0;1;32m                                                                  ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:4:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  int64_t current = mi_atomic_load_relaxed((_Atomic(int64_t)*)p);
[0;1;32m                    ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:5:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:105:21: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:6:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_weak_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  while (current < x && !mi_atomic_cas_weak_release((_Atomic(int64_t)*)p, &current, x)) { /* nothing */ };
[0;1;32m                         ^
[0m[1m../include/mimalloc-atomic.h:52:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:41:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak'[0m
  mi_atomic(compare_exchange_weak_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:9:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_weak_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:52:79: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                              ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:7:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:106:26: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:52:104: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_weak_release'[0m
#define mi_atomic_cas_weak_release(p,exp,des)    mi_atomic_cas_weak(p,exp,des,mi_memory_order(release),mi_memory_order(relaxed))
[0;1;32m                                                                                                       ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:8:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (intptr_t)mi_atomic_add_acq_rel((_Atomic(uintptr_t)*)p, (uintptr_t)add);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:10:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
In file included from ../include/mimalloc-internal.h:11:
In file included from ../include/mimalloc-types.h:13:
[1m../include/mimalloc-atomic.h:264:20: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:59:84: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:11:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_block_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & ~3);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:14:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:489:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:15:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_delayed_t)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xthread_free) & 3);
[0;1;32m                        ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:16:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:493:25: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:17:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  return (mi_heap_t*)(mi_atomic_load_relaxed(&((mi_page_t*)page)->xheap));
[0;1;32m                      ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:18:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:498:23: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:19:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  mi_atomic_store_release(&page->xheap,(uintptr_t)heap);
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:20:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:503:3: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:21:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_likely(mi_atomic_load_relaxed(&_mi_numa_node_count) == 1)) return 0;
[0;1;32m                ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:22:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:804:17: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:23:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  const size_t count = mi_atomic_load_relaxed(&_mi_numa_node_count);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:47:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:24:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:17:
[1m../include/mimalloc-internal.h:808:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:47:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_relaxed'[0m
#define mi_atomic_load_relaxed(p)                mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:25:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:23:
[1m../src/stats.c:510:30: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  *peak_commit    = (size_t)(mi_atomic_loadi64_relaxed((_Atomic(int64_t)*)&_mi_stats_main.committed.peak));
[0;1;32m                             ^
[0m[1m../include/mimalloc-atomic.h:111:41: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                        ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:26:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:23:
[1m../src/stats.c:510:30: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
[1m../include/mimalloc-atomic.h:111:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:27:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:23:
[1m../src/stats.c:511:30: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_relaxed'[0m
  *current_commit = (size_t)(mi_atomic_loadi64_relaxed((_Atomic(int64_t)*)&_mi_stats_main.committed.current));
[0;1;32m                             ^
[0m[1m../include/mimalloc-atomic.h:111:68: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_loadi64_relaxed'[0m
#define mi_atomic_loadi64_relaxed(p)    mi_atomic(load_explicit)(p,mi_memory_order(relaxed))
[0;1;32m                                                                   ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:29:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_relaxed
[0;1;32m^
[0mIn file included from ../src/static.c:24:
[1m../src/random.c:214:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  if (mi_atomic_load_acquire(&no_getrandom)==0) {
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:30:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:24:
[1m../src/random.c:214:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:31:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0mIn file included from ../src/static.c:24:
[1m../src/random.c:218:5: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    mi_atomic_store_release(&no_getrandom, 1UL); // don't call again, and fall back to /dev/urandom
[0;1;32m    ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:32:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:24:
[1m../src/random.c:218:5: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:33:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:382:24: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_load_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
    uintptr_t try_ok = mi_atomic_load_acquire(&large_page_try_ok);
[0;1;32m                       ^
[0m[1m../include/mimalloc-atomic.h:46:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:34:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_load_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:382:24: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:46:77: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_load_acquire'[0m
#define mi_atomic_load_acquire(p)                mi_atomic(load_explicit)(p,mi_memory_order(acquire))
[0;1;32m                                                                            ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:35:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:388:7: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_compare_exchange_strong_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
      mi_atomic_cas_strong_acq_rel(&large_page_try_ok, &try_ok, try_ok - 1);
[0;1;32m      ^
[0m[1m../include/mimalloc-atomic.h:55:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:44:3: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong'[0m
  mi_atomic(compare_exchange_strong_explicit)(p,expected,desired,mem_success,mem_fail)
[0;1;32m  ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:38:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_compare_exchange_strong_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:388:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acq_rel'[0m
[1m../include/mimalloc-atomic.h:55:81: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:36:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acq_rel
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:388:7: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_acquire'[0m
[1m../include/mimalloc-atomic.h:55:106: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_cas_strong_acq_rel'[0m
#define mi_atomic_cas_strong_acq_rel(p,exp,des)  mi_atomic_cas_strong(p,exp,des,mi_memory_order(acq_rel),mi_memory_order(acquire))
[0;1;32m                                                                                                         ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:37:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_acquire
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:428:11: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_store_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
          mi_atomic_store_release(&large_page_try_ok, (uintptr_t)10);  // on error, don't try again for the next N allocations
[0;1;32m          ^
[0m[1m../include/mimalloc-atomic.h:48:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:39:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_store_explicit
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:428:11: [0m[0;1;31merror: [0m[1muse of undeclared identifier 'memory_order_release'[0m
[1m../include/mimalloc-atomic.h:48:80: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_store_release'[0m
#define mi_atomic_store_release(p,x)             mi_atomic(store_explicit)(p,x,mi_memory_order(release))
[0;1;32m                                                                               ^
[0m[1m../include/mimalloc-atomic.h:36:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_memory_order'[0m
#define  mi_memory_order(name)  memory_order_##name
[0;1;32m                                ^
[0m[1m<scratch space>:40:1: [0m[0;1;30mnote: [0mexpanded from here[0m
memory_order_release
[0;1;32m^
[0mIn file included from ../src/static.c:25:
[1m../src/os.c:492:20: [0m[0;1;35mwarning: [0m[1mimplicit declaration of function 'atomic_fetch_add_explicit' is invalid in C99 [-Wimplicit-function-declaration][0m
  uintptr_t hint = mi_atomic_add_acq_rel(&aligned_base, size);
[0;1;32m                   ^
[0m[1m../include/mimalloc-atomic.h:59:50: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic_add_acq_rel'[0m
#define mi_atomic_add_acq_rel(p,x)               mi_atomic(fetch_add_explicit)(p,x,mi_memory_order(acq_rel))
[0;1;32m                                                 ^
[0m[1m../include/mimalloc-atomic.h:35:33: [0m[0;1;30mnote: [0mexpanded from macro 'mi_atomic'[0m
#define  mi_atomic(name)        atomic_##name
[0;1;32m                                ^
[0m[1m<scratch space>:41:1: [0m[0;1;30mnote: [0mexpanded from here[0m
atomic_fetch_add_explicit
[0;1;32m^
[0m[0;1;31mfatal error: [0m[1mtoo many errors emitted, stopping now [-ferror-limit=][0m
17 warnings and 20 errors generated.
ninja: subcommands failed
/home/pg/mix/store/b8eb91ca60eb8068aa5982cea62bb2ec-env-c/touch complete
/home/pg/mix/store/b2f6763f74c2f230d13c8df14a321974-boot-final-make/touch complete
/home/pg/mix/store/ab1907e5131d0561c8cc17e2f7e22c9d-boot-final-env/touch complete
/home/pg/mix/store/acad2185a18591f740cc8de8601f62f9-env-c-nort/touch complete
/home/pg/mix/store/ee993333e28a93979557f3de6c83841f-lib-musl-full/touch complete
/home/pg/mix/store/a8f02ddfe3d541b9a1fe6c9b0172d663-lib-compiler_rt/touch complete
/home/pg/mix/store/ccd44c89397bb643f5a495154894921f-dev-lang-clang/touch complete
/home/pg/mix/store/01322e24848361b77e5b46d91b9e4d81-env-clang/touch complete
/home/pg/mix/store/86973f1ec0faaf26e8e1e259b4c81cd4-env-lld/touch complete
/home/pg/mix/store/f7056821ebdc7ed22caf37702c335440-env-compiler/touch complete
/home/pg/mix/store/350c366278adbb07c1ed8893a7a2a197-env-system/touch complete
/home/pg/mix/store/1213d89b17f70573b1445d543349d2ef-env-release/touch complete
/home/pg/mix/store/8ec8785436e5b4461490662b5377ed84-env-autoconf/touch complete
/home/pg/mix/store/f0da2e9b2f20c6a0fcf1117a4b505632-env-linux/touch complete
/home/pg/mix/store/bbbc59225308ba64c9386f375306b9a8-lib-musl/touch complete
/home/pg/mix/store/ec8eceec07d011eae78882d551ae2b2d-boot-final-cmake/touch complete
/home/pg/mix/store/42139d41870a1606789b7f9e233ff17b-boot-stage-6-cmake/touch complete
/home/pg/mix/store/ecb0501fa534acd02a7b8d37b5f2a395-env-cmake/touch complete
/home/pg/mix/store/6ab2bedb38606830be5401f409a55507-boot-stage-6-samurai/touch complete
/home/pg/mix/store/d50d79e0489765e3bc95f118b89eb8fb-boot-stage-6-env/touch complete
/home/pg/mix/store/42c96b62c5dcbf445998d90f26f7bf3c-boot-stage-6-clang/touch complete
/home/pg/mix/store/e6bd40f9f63038f3a541bb9f4b26176c-boot-stage-2-which/touch complete
/home/pg/mix/store/8714ac42f7063388512680c4733d5966-boot-stage-4-sed/touch complete
/home/pg/mix/store/f72f50e2cbb0414bd773bc553853b5db-boot-stage-4-gawk/touch complete
/home/pg/mix/store/db3546100515aa34e04c614d89056700-boot-stage-4-grep/touch complete
/home/pg/mix/store/57575cde2d31cecde810abce85fd5504-boot-stage-4-coreutils/touch complete
/home/pg/mix/store/486829026dd46bb71f0e4c0ad0cc984b-boot-stage-5-dash/touch complete
/home/pg/mix/store/1546f6f674894fe17face4348ceb63fc-boot-stage-5-diffutils/touch complete
/home/pg/mix/store/e33b76a1ec1f495af357df677444a995-boot-stage-5-findutils/touch complete
/home/pg/mix/store/a3d5f44d8cf7b85a67502f0f94f66b45-env-bootstrap/touch complete
/home/pg/mix/store/6470c737bf1e9905f17453201b9b54ec/touch complete
Context:
24  | do_unpack() {
26  | mkdir bld && cd bld
28  | for s in $src/*; do
29  |     case $s in
30  |         *touch)
31  |         ;;
32  |         *)
33  |             $untar $s
34  |         ;;
35  |     esac
36  | done
38  | cd *
40  | }
42  | do_configure() {
43  | echo 'configure stage'
45  | setup_compiler
47  | build_cmake_prepare -G Ninja -DMI_OVERRIDE=ON -DMI_BUILD_STATIC=ON -DMI_BUILD_SHARED=OFF -DMI_BUILD_TESTS=OFF ..
49  | }
51  | do_build() {
52  | echo 'build stage'
54  | cd build && ninja -j $make_thrs all
56  | }
58  | do_test() {
59  | echo 'test stage'
61  | . $out/env
63  | gcc $CPPFLAGS $CFLAGS $LDFLAGS -o main -x c - << EOF
64  | #include <stdlib.h>
65  | #include <locale.h>
67  | int main() {
68  |     free(malloc(1));
69  |     freelocale(0);
70  |     free(realloc(0, 100));
72  |     return 0;
73  | }
74  | EOF
76  | ./main
78  | }
80  | do_install() {
81  | echo 'install stage'
83  | cd build && ninja install
85  | cat << EOF > $out/env
87  | export LDFLAGS="-L$out/lib/mimalloc-2.0 -lmimalloc \$LDFLAGS"
89  | EOF
90  | }
92  | build() {
93  | echo "build $out"
95  | do_unpack
97  | (do_configure)
98  | (do_build)
99  | (do_install)
100 | (do_test)
102 | echo "$out complete"
103 | }
105 | build
CalledProcessError: Command '['dash', '-s']' returned non-zero exit status 1.
/home/pg/mix/store/d42a05e4d7567e1f0e92c43ded78fa72-lib-mimalloc failed
